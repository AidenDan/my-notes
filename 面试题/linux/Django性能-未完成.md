# 1

## 1-1

1. pstack 32232 | grep 'Thread '| head -n 10

   看到了73个线程

2. top

   %CPU 110+ COMMAND python3.7

   ```javascript
   32232 work      20   0 12.1g 6.5g 5516 S 110.1 17.1 187:54.23 python3.7                                                                                                                     
    5422 root      20   0 2477m  41m 7632 S  1.7  0.1   1630:40 hosteye                                                                                                                        
   16464 root      20   0  850m  19m 2876 S  0.7  0.0   2471:53 falcon-agent                                                                                                                   
   18490 work      20   0 1245m 154m 2832 S  0.7  0.4 183:44.29 python                                                                                                                         
   13424 root      20   0  319m  18m 3252 S  0.3  0.0  63:20.66 easy_collector                                                                                                                 
   22521 root      20   0 1121m  79m 7088 S  0.3  0.2   2350:19 filebeat                                                                                                                       
   29300 work      20   0 1115m  21m 2284 S  0.3  0.1 442:30.89 python        
   ```

   

3. iostat -x -m 3

   ```javascript
   avg-cpu:  %user   %nice %system %iowait  %steal   %idle
              9.97    0.00    0.87    0.00    0.20   88.96
   
   Device:         rrqm/s   wrqm/s     r/s     w/s    rMB/s    wMB/s avgrq-sz avgqu-sz   await  svctm  %util
   vda               0.00     1.67    0.00    1.33     0.00     0.01    18.00     0.00    0.25   0.25   0.03
   vdb               0.00  5630.33    0.00   62.67     0.00    22.24   726.77     0.54    8.67   0.22   1.40
   
   
   ```

4. dstat -y

   ```xml
   ---system--
    int   csw 
    324  1948 
   6346    11k
   6931    13k
   6245    12k
   6252    11k
   6158    11k
   5330  9386 
   6412    11k
   5832  9988
   
   ```

   s

5.  vmstat 4

   ```javascript
   procs -----------memory---------- ---swap-- -----io---- --system-- -----cpu-----
    r  b   swpd   free   buff  cache   si   so    bi    bo   in   cs us sy id wa st
    1  0      0 242528 140456 29558232    0    0     0    49 7496 12401  6  2 91  0  1	
    1  0      0 326604 140404 29472000    0    0     0 25878 7587 12368  6  2 91  0  0	
    1  0      0 316460 140408 29483868    0    0     0     5 10281 16992  7  3 90  0  1	
    1  0      0 301620 140416 29499568    0    0     0    24 5351 10360  8  1 90  0  0	
    1  0      0 288676 140436 29509576    0    0     0    26 9682 16557  7  3 88  0  2	
    1  0      0 272308 140448 29527164    0    0     0    21 6744 11590  6  2 91  0  0	
    1  0      0 260488 140468 29539480    0    0     0    65 7148 11047  6  2 92  0  0	
    1  0      0 310476 140428 29489628    0    0     0    24 6508 11414  6  2 91  0  0	
    3  0      0 292628 140436 29508232    0    0     0    14 7300 12611  6  3 91  0  0
   ```

   

   ```xml
   procs -----------memory---------- ---swap-- -----io---- --system-- -----cpu-----
    r  b   swpd   free   buff  cache   si   so    bi    bo   in                 cs us sy id wa st
    1  0      0 377604 139920 29428156    0    0     0    16 4266    6793 10  1 89  0  0	
    2  0      0 376200 139924 29428268    0    0     0  4094 4449 7357 10  1 89  0  1	
    1  0      0 375332 139940 29428284    0    0     0    19 4430    7246 10  1 89  0  1	
    1  0      0 376092 139952 29428284    0    0     0    13 4590    7455 10  1 89  0  1
   ```

   再去看还有40个线程

6. 

pstack 32232 | grep 'Thread '

